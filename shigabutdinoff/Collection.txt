// Object for working with collections
// by: shigabutdinoff

var Standard = new shigabutdinoff/Standard
var EnumeratesValues = new shigabutdinoff/EnumeratesValues
var Helpers = new shigabutdinoff/Helpers

// The items contained in the collection.
var items = []

// Create a collection from the given value.
func collect(items)
    var Collection = new shigabutdinoff/Collection
    Collection.items = EnumeratesValues.getArrayableItems(items)
    return Collection

// Create a collection with the given range.
func range(from, to)
    return collect(Standard.range(from, to))

// Get all of the items in the collection.
func all()
    return items

// TODO: LazyCollection

// Get the average value of a given key.
func avg()
    var sum = 0
    for item : items
        ? !Standard.is_null(item)
            sum = sum + item

    var count = items.Count()
    ? count
        return sum / count

// Get the median of a given key.
func median()
    var values = []
    for item : items
        ? !Standard.is_null(item)
            values.Add(item)
    values.Sort()

    var count = values.Count()

    ? count = 0
        return null

    var middle = count / 2

    ? count % 2
        return middle

    return collect([values[middle - 1], values[middle]]).avg()